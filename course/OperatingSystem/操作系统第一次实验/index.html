
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://wu-uk.github.io/wuuuk/course/OperatingSystem/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%AE%9E%E9%AA%8C/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%AE%9E%E9%AA%8C/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>第一次实验-进程遍历 - Wuuuk's Blog</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="Wuuuk&#39;s Blog" class="md-header__button md-logo" aria-label="Wuuuk's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Wuuuk's Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第一次实验-进程遍历
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/wu-uk/wuuuk" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../CP/" class="md-tabs__link">
          
  
  
    
  
  算法竞赛

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  课程

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../project/" class="md-tabs__link">
          
  
  
    
  
  项目

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Wuuuk&#39;s Blog" class="md-nav__button md-logo" aria-label="Wuuuk's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>

    </a>
    Wuuuk's Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/wu-uk/wuuuk" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    首页
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../CP/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    算法竞赛
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    算法竞赛
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../CP/templates/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    算法模板
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    算法模板
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E6%95%B0%E8%AE%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数论
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    组合数学
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    线性代数
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E5%A4%9A%E9%A1%B9%E5%BC%8F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    多项式
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E5%87%A0%E4%BD%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    几何
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E5%9B%BE%E8%AE%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    图论
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E6%A0%91%E8%AE%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数论
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数据结构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    字符串
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    动态规划
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CP/templates/%E6%9D%82%E9%A1%B9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    杂项
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    课程
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    课程
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../DataStructure/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    数据结构
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    数据结构
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%80%E7%AB%A0%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第一章作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%BA%8C%E7%AB%A0%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第二章作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%BA%8C%E7%AB%A0%E5%AE%9E%E9%AA%8C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第二章实验
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%89%E7%AB%A0%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第三章作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%89%E7%AB%A0%E5%AE%9E%E9%AA%8C1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第三章实验1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%89%E7%AB%A0%E5%AE%9E%E9%AA%8C2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第三章实验2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E5%9B%9B%E7%AB%A0%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第四章作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%BA%94%E7%AB%A0%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第五章作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%BA%94%E7%AB%A0%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第五章实验报告
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E5%85%AD%E7%AB%A0%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第六章作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E5%85%AD%E7%AB%A0%E5%AE%9E%E9%AA%8C1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第六章实验1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E5%85%AD%E7%AB%A0%E5%AE%9E%E9%AA%8C2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第六章实验2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%83%E7%AB%A0%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第七章作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%83%E7%AB%A0%E5%AE%9E%E9%AA%8C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第七章实验
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E5%85%AB%E7%AB%A0%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第八章作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B9%9D%E7%AB%A0%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第九章作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DataStructure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E5%8D%81%E7%AB%A0%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第十章作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ComputerNetwork/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    计算机网络
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    计算机网络
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ComputerNetwork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%8C%E6%AC%A1%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第二次作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ComputerNetwork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E6%AC%A1%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第三次作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ComputerNetwork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E5%9B%9B%E6%AC%A1%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第四次作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ComputerNetwork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E6%AC%A1%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第五次作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ComputerNetwork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E5%85%AD%E6%AC%A1%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第六次作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ComputerNetwork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%83%E6%AC%A1%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第七次作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ComputerNetwork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E5%85%AB%E6%AC%A1%E4%BD%9C%E4%B8%9A/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第八次作业
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    操作系统
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    操作系统
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    第一次实验-进程遍历
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    第一次实验-进程遍历
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        实验内容
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        实验思路
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        实验过程
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="实验过程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        环境搭建
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        环境验证
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        定义数据结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        搭建系统调用框架并测试
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dfs" class="md-nav__link">
    <span class="md-ellipsis">
      
        实现内核态的进程树 DFS 遍历
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        实验结果
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        实验总结与反思
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%AE%9E%E9%AA%8C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    第二次实验-进程同步
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Database/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    数据库系统原理
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    数据库系统原理
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Database/%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    关系代数
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Database/SQL%E8%AF%AD%E8%A8%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SQL语言
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../project/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    项目
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    项目
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../project/LuoguAgent/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    LuoguAgent
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    LuoguAgent
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../project/LuoguAgent/%E7%88%AC%E8%99%AB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    爬虫
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../project/LuoguAgent/agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../project/LuoguAgent/streamlit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    前端
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        实验内容
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        实验思路
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        实验过程
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="实验过程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        环境搭建
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        环境验证
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        定义数据结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        搭建系统调用框架并测试
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dfs" class="md-nav__link">
    <span class="md-ellipsis">
      
        实现内核态的进程树 DFS 遍历
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        实验结果
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        实验总结与反思
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="_1">操作系统第一次实验</h1>
<h2 id="_2">实验内容</h2>
<p>本次实验的主要内容是在 Linux 内核中设计并实现一个新的系统调用 <code>sys_proc_dfs</code>。该系统调用需要能够接收一个指定的进程 PID，并以此为起点，采用深度优先搜索的方式遍历该进程的所有后代。在遍历过程中，需要收集每个后代进程的特定信息，包括其 PID、状态、用户态和内核态运行时间、父/子/兄进程 PID、上一次调度的起止时间戳，以及一个表示数据是否成功写入用户缓冲区的标志。最后，系统调用需将收集到的这些进程记录安全地拷贝到用户空间提供的缓冲区中，供用户态测试程序读取和展示。</p>
<h2 id="_3">实验思路</h2>
<p>本实验采取分阶段推进的策略。首先着手于搭建和验证内核编译环境，通过添加一个极简的 <code>sys_hello</code> 系统调用，跑通了从修改内核源码、编译、安装、重启到用户态测试的完整流程，为后续开发奠定基础。</p>
<p>明确了基本流程后，根据实验要求，在内核头文件中定义了用于数据交换的<code>struct proc_dfs_info</code> 结构体。紧接着，在内核中注册了新的系统调用 <code>sys_proc_dfs</code>，并实现了其基本框架，确保能够正确接收用户传入的PID、缓冲区地址和大小等参数，并进行初步的合法性校验。</p>
<p>实验的核心在于内核态深度优先搜索逻辑的实现。为此，设计了 <code>kernel_dfs_traverse</code> 辅助函数。该函数利用Linux内核提供的链表遍历宏（如 <code>list_for_each_entry</code>）和RCU读写锁来安全地访问进程数据结构（<code>task_struct</code>），递归地遍历 <code>children</code> 和 <code>sibling</code> 链表，实现了DFS算法。</p>
<p>在遍历过程中，<code>kernel_dfs_traverse</code> 函数负责从 <code>task_struct</code> 及其内嵌的调度相关结构体（如 <code>sched_entity</code>）中提取所需的进程信息，并将其填充到一个临时的内核态 <code>kinfo</code> 结构体中。</p>
<p>最后，编写了用户态测试程序 <code>test_dfs.c</code>。该程序负责解析命令行参数获取目标PID，分配缓冲区，调用新的 <code>sys_proc_dfs</code> 系统调用，接收内核返回的进程记录数量和数据，并将这些数据格式化为易于阅读的表格进行输出。整个开发过程伴随着持续的 <code>printk/dmesg</code> 内核调试和用户态测试，以解决编译依赖、语法错误、API理解偏差等问题，确保最终实现的功能符合实验要求。</p>
<h2 id="_4">实验过程</h2>
<h3 id="_5">环境搭建</h3>
<blockquote>
<p>本实验使用VMware+Ubuntu，下文所有操作均在虚拟机中进行。</p>
</blockquote>
<p>下载Linux源代码并做好相关环境配置，为后续实验奠定基础。</p>
<ol>
<li><strong>更新包列表并安装编译依赖</strong></li>
</ol>
<p><div class="highlight"><pre><span></span><code><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>update
<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>build-essential<span class="w"> </span>libncurses-dev<span class="w"> </span>bison<span class="w"> </span>flex<span class="w"> </span>libssl-dev<span class="w"> </span>libelf-dev<span class="w"> </span>git
</code></pre></div>
   其中，-y选项用于在所有交互式提示自动回答yes。</p>
<ol>
<li><strong>下载Linux内核源码</strong></li>
</ol>
<div class="highlight"><pre><span></span><code><span class="w"> </span>apt<span class="w"> </span><span class="nb">source</span><span class="w"> </span><span class="nv">linux</span><span class="o">=</span><span class="m">6</span>.14.0-33.33
</code></pre></div>
<ol>
<li><strong>配置内核</strong></li>
</ol>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="c1"># 1. 进入源码目录</span>
<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>linux-6.14.0/
<span class="w"> </span><span class="c1"># 2. 复制当前系统的内核配置文件</span>
<span class="w"> </span>cp<span class="w"> </span>/boot/config-<span class="k">$(</span>uname<span class="w"> </span>-r<span class="k">)</span><span class="w"> </span>.config
<span class="w"> </span><span class="c1"># 3. 基于旧的 .config 文件自动回答所有新配置项</span>
<span class="w"> </span>make<span class="w"> </span>olddefconfig
</code></pre></div>
<h3 id="_6">环境验证</h3>
<p>在配置好的环境中，尝试写一个sys_hello系统调用以验证环境正常并熟悉编写系统调用的过程。</p>
<ol>
<li><strong>分配系统调用号</strong></li>
</ol>
<p>编辑 <code>arch/x86/entry/syscalls/syscall_64.tbl</code> 文件。在最后一行添加：<code>548 64  hello           sys_hello</code>。<code>548</code> 为新系统调用号，<code>64</code> 表示这是一个64位系统调用，<code>hello</code> 是系统调用的名称，<code>sys_hello</code> 是内核中对应的函数名。</p>
<ol>
<li><strong>声明函数原型</strong></li>
</ol>
<p>编辑 <code>include/linux/syscalls.h</code> 这个头文件，在最后一个 <code>#endif</code> 之前，添加：<code>asmlinkage long sys_hello(void)</code>; 声明我们的函数，以便内核的其他部分能找到它。</p>
<ol>
<li><strong>实现函数</strong></li>
</ol>
<p>编辑 <code>kernel/sys.c</code> 文件，在最末尾添加我们对系统调用的函数实现。
   <div class="highlight"><pre><span></span><code><span class="w"> </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/printk.h&gt;</span><span class="c1"> // 包含 printk 函数的定义</span>
<span class="w"> </span><span class="n">SYSCALL_DEFINE0</span><span class="p">(</span><span class="n">hello</span><span class="p">)</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;Hello, World! My first syscall is working!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</code></pre></div>
   其中，<code>SYSCALL_DEFINE0</code> 是一个宏，用于定义一个没有参数的系统调用；<code>KERN_INFO</code> 是日志级别；系统调用最后应返回一个值。</p>
<ol>
<li>
<p><strong>编译并安装内核</strong>
   <div class="highlight"><pre><span></span><code><span class="w"> </span><span class="c1"># -j$(nproc) 会使用所有的 CPU 核心来并行编译，速度最快</span>
<span class="w"> </span>make<span class="w"> </span>-j<span class="k">$(</span>nproc<span class="k">)</span>
<span class="w"> </span><span class="c1"># 添加执行权限</span>
<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>debian/scripts/*
<span class="w"> </span><span class="c1"># 安装内核模块</span>
<span class="w"> </span>sudo<span class="w"> </span>make<span class="w"> </span>modules_install
<span class="w"> </span><span class="c1"># 安装内核</span>
<span class="w"> </span>sudo<span class="w"> </span>make<span class="w"> </span>install
<span class="w"> </span><span class="c1"># 重启虚拟机</span>
<span class="w"> </span>sudo<span class="w"> </span>reboot
</code></pre></div></p>
</li>
<li>
<p><strong>编写用户态测试程序</strong>
   创建一个新文件test_hello.c，写入以下代码。
   <div class="highlight"><pre><span></span><code><span class="w"> </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="w"> </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
<span class="w"> </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/syscall.h&gt;</span><span class="c1"> // 包含 syscall() 函数</span>
<span class="w"> </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;errno.h&gt;</span><span class="c1">       // 包含 perror()</span>

<span class="w"> </span><span class="cp">#define SYS_hello 548</span>

<span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="kt">long</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">     </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;正在调用 sys_hello (syscall #%d)...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SYS_hello</span><span class="p">);</span>
<span class="w">     </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">syscall</span><span class="p">(</span><span class="n">SYS_hello</span><span class="p">);</span>
<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;调用成功! 请检查 dmesg 查看内核日志。</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">     </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="c1">// 如果 ret 不是 0 (比如 -1)，说明出错了</span>
<span class="w">         </span><span class="c1">// perror 会根据 errno 自动打印错误信息</span>
<span class="w">         </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;syscall(sys_hello) 失败&quot;</span><span class="p">);</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</code></pre></div>
   其中，<code>548</code> 是在 <code>syscall_64.tbl</code> 中分配的系统调用号；<code>syscall()</code> 是调用任意系统调用的标准 C 库函数。</p>
</li>
<li>
<p><strong>测试sys_hello系统调用</strong>
   <div class="highlight"><pre><span></span><code><span class="w"> </span><span class="cp"># 编译</span>
<span class="w"> </span><span class="n">gcc</span><span class="w"> </span><span class="o">~/</span><span class="n">test_hello</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="o">~/</span><span class="n">test_hello</span>
<span class="w"> </span><span class="cp"># 运行</span>
<span class="w"> </span><span class="o">~/</span><span class="n">test_hello</span>
<span class="w"> </span><span class="cp"># 查看内核日志</span>
<span class="w"> </span><span class="n">dmesg</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">tail</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="mi">5</span>
</code></pre></div></p>
</li>
</ol>
<h3 id="_7">定义数据结构</h3>
<p>在内核中创建头文件 <code>include/linux/proc_dfs.h</code>，并定义用于数据交换的 <code>struct proc_dfs_info</code> 结构体，为后续编写系统调用做好准备。</p>
<div class="highlight"><pre><span></span><code><span class="cp">#ifndef _LINUX_PROC_DFS_H</span>
<span class="cp">#define _LINUX_PROC_DFS_H</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/types.h&gt;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">state</span><span class="p">;</span><span class="w">      </span><span class="c1">// 进程状态</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">utime</span><span class="p">;</span><span class="w">     </span><span class="c1">// 用户态运行时间</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">stime</span><span class="p">;</span><span class="w">     </span><span class="c1">// 内核态运行时间</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">parent_pid</span><span class="p">;</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">first_child_pid</span><span class="p">;</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">next_sibling_pid</span><span class="p">;</span>
<span class="w">    </span><span class="n">u64</span><span class="w"> </span><span class="n">sched_start_ns</span><span class="p">;</span>
<span class="w">    </span><span class="n">u64</span><span class="w"> </span><span class="n">sched_end_ns</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">report</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#endif</span>
</code></pre></div>
<p>其中包括该进程 PID、状态、用户态和内核态运行时间、父/子/兄进程 PID、上一次调度的起止时间戳，以及是否上报的标志。</p>
<h3 id="_8">搭建系统调用框架并测试</h3>
<p>仿照之前的 <code>sys_hello</code>，搭建 <code>sys_proc_dfs</code> 的系统调用框架并进行简答测试。为之后实现dfs逻辑细节留下空间。</p>
<ol>
<li>
<p><strong>分配系统调用号</strong>
   编辑 <code>arch/x86/entry/syscalls/syscall_64.tbl</code> 文件。在最后一行添加：<code>549 64  proc_dfs        sys_proc_dfs</code>。<code>549</code> 为新系统调用号，<code>64</code> 表示这是一个64位系统调用，<code>proc_dfs</code> 是系统调用的名称，<code>sys_proc_dfs</code> 是内核中对应的函数名。</p>
</li>
<li>
<p><strong>声明函数原型</strong></p>
</li>
</ol>
<p>在 <code>include/linux/syscalls.h</code> 的末尾 <code>#endif</code> 前，添加：
   <div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/proc_dfs.h&gt;</span>
<span class="n">asmlinkage</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">sys_proc_dfs</span><span class="p">(</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">top_pid</span><span class="p">,</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="w"> </span><span class="n">__user</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">,</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buf_size</span>
<span class="p">);</span>
</code></pre></div></p>
<ol>
<li><strong>实现系统调用函数骨架</strong></li>
</ol>
<p>在 <code>kernel/sys.c</code> 的末尾，编写系统调用函数的骨架。
   <div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/uaccess.h&gt;</span><span class="c1">   // 包含 copy_to_user / copy_from_user</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/proc_dfs.h&gt;</span><span class="c1">  // 包含结构体定义</span>

<span class="n">SYSCALL_DEFINE3</span><span class="p">(</span><span class="n">proc_dfs</span><span class="p">,</span>
<span class="w">                </span><span class="kt">pid_t</span><span class="p">,</span><span class="w"> </span><span class="n">top_pid</span><span class="p">,</span>
<span class="w">                </span><span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="w"> </span><span class="n">__user</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span>
<span class="w">                </span><span class="kt">size_t</span><span class="p">,</span><span class="w"> </span><span class="n">buf_size</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;[proc_dfs] 系统调用被触发!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;[proc_dfs] 目标 PID: %d, 缓冲区地址: %p, 缓冲区大小: %ld 字节</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">top_pid</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">buf_size</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* --- 参数合法性检查 ---</span>
<span class="cm">     * 检查用户传入的缓冲区地址是否为空</span>
<span class="cm">     * 检查缓冲区大小是否至少能容纳一个结构体</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">buf</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">buf_size</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_WARNING</span><span class="w"> </span><span class="s">&quot;[proc_dfs] 缓冲区无效! buf: %p, buf_size: %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">buf_size</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span><span class="w"> </span><span class="c1">// 返回 &quot;Invalid Argument&quot; (无效参数) 错误</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 暂时先返回 0，表示成功找到了 0 个进程</span>
<span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;[proc_dfs] 骨架执行完毕，暂时返回 0。</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
   在参数列表中，<code>top_pid</code> 为起始进程 PID；<code>buf</code> 为用户空间指针，指向 proc_dfs_info 数组；<code>buf_size</code>：缓冲区字节数，用于计算能容纳的记录数。在骨架中，打印调试信息，检查传入参数的合法性，并返回0。</p>
<ol>
<li><strong>编写用户态测试程序</strong></li>
</ol>
<p><div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="c1">  </span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/syscall.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;errno.h&gt;</span><span class="c1">   </span>

<span class="cp">#define __NR_proc_dfs 549</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">state</span><span class="p">;</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">utime</span><span class="p">;</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">stime</span><span class="p">;</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">parent_pid</span><span class="p">;</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">first_child_pid</span><span class="p">;</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">next_sibling_pid</span><span class="p">;</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">sched_start_ns</span><span class="p">;</span><span class="w"> </span><span class="c1">// 在 C 语言中用 unsigned long long 对应 u64</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">sched_end_ns</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">reported</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span><span class="w"> </span><span class="c1">// 在栈上分配一个能装100个记录的缓冲区</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buf_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span><span class="w"> </span><span class="c1">// 缓冲区总大小（字节）</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">num_procs_found</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;用法: %s &lt;PID&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="w"> </span><span class="c1">// 把第一个参数（字符串）转成整数 PID</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;正在调用 sys_proc_dfs (syscall #%d) ...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">__NR_proc_dfs</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;目标 PID: %d, 缓冲区大小: %ld 字节</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="n">buf_size</span><span class="p">);</span>

<span class="w">    </span><span class="n">num_procs_found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">syscall</span><span class="p">(</span><span class="n">__NR_proc_dfs</span><span class="p">,</span><span class="w"> </span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">buf_size</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">num_procs_found</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;syscall(proc_dfs) 失败&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;系统调用成功！</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;内核（暂时）返回了 %ld 个进程。</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">num_procs_found</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
   在用户空间定义完全相同的结构体以便 C 编译器知道如何分配内存和解析数据。不能 <code>#include &lt;linux/proc_dfs.h&gt;</code> 因为那个是内核头文件，用户空间程序找不到。使用之前分配的系统调用号，并进行系统调用，输出调试信息。</p>
<ol>
<li><strong>测试系统调用框架</strong></li>
</ol>
<p>编译修改后的整个内核，并进行测试。</p>
<h3 id="dfs">实现内核态的进程树 DFS 遍历</h3>
<p>填充之前实现的系统调用骨架，实现dfs遍历的逻辑细节。</p>
<ol>
<li>
<p><strong>创建dfs上下文结构体</strong>
   <div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">dfs_context</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="w"> </span><span class="n">__user</span><span class="w"> </span><span class="o">*</span><span class="n">user_buf</span><span class="p">;</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">max_count</span><span class="p">;</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">current_count</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
   其中，<code>user_buf</code> 指向用户缓冲区，<code>max_count</code> 表示缓冲区最多容纳的 proc_dfs_info 个数，<code>current_count</code> 表示当前已写入多少条。</p>
</li>
<li>
<p><strong>实现dfs核心函数</strong>
   <div class="highlight"><pre><span></span><code><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">kernel_dfs_traverse</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">dfs_context</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="n">child</span><span class="p">;</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="w"> </span><span class="n">kinfo</span><span class="p">;</span><span class="w"> </span><span class="c1">// 内核空间的临时信息</span>
<span class="w">    </span><span class="n">u64</span><span class="w"> </span><span class="n">last_duration</span><span class="p">;</span><span class="w">          </span><span class="c1">// 用于计算上一个时间片的持续时长</span>

<span class="w">    </span><span class="cm">/* --- 1. 缓冲区检查 --- */</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">current_count</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">max_count</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/* --- 2. 彻底初始化 kinfo --- */</span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">kinfo</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">kinfo</span><span class="p">));</span>

<span class="w">    </span><span class="cm">/* --- 3. 填充所有字段 --- */</span>
<span class="w">    </span><span class="n">kinfo</span><span class="p">.</span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">pid</span><span class="p">;</span>
<span class="w">    </span><span class="n">kinfo</span><span class="p">.</span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">__state</span><span class="p">;</span>
<span class="w">    </span><span class="n">kinfo</span><span class="p">.</span><span class="n">utime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">utime</span><span class="p">;</span>
<span class="w">    </span><span class="n">kinfo</span><span class="p">.</span><span class="n">stime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">stime</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="o">-&gt;</span><span class="n">real_parent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">kinfo</span><span class="p">.</span><span class="n">parent_pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">real_parent</span><span class="o">-&gt;</span><span class="n">pid</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="n">first_child</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list_first_entry_or_null</span><span class="p">(</span>
<span class="w">            </span><span class="o">&amp;</span><span class="n">task</span><span class="o">-&gt;</span><span class="n">children</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="p">,</span><span class="w"> </span><span class="n">sibling</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">first_child</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">kinfo</span><span class="p">.</span><span class="n">first_child_pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first_child</span><span class="o">-&gt;</span><span class="n">pid</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="n">next_sibling</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="o">-&gt;</span><span class="n">real_parent</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
<span class="w">        </span><span class="o">!</span><span class="n">list_is_last</span><span class="p">(</span><span class="o">&amp;</span><span class="n">task</span><span class="o">-&gt;</span><span class="n">sibling</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">task</span><span class="o">-&gt;</span><span class="n">real_parent</span><span class="o">-&gt;</span><span class="n">children</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">next_sibling</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list_next_entry</span><span class="p">(</span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">sibling</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">next_sibling</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">kinfo</span><span class="p">.</span><span class="n">next_sibling_pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">next_sibling</span><span class="o">-&gt;</span><span class="n">pid</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">kinfo</span><span class="p">.</span><span class="n">sched_start_ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">se</span><span class="p">.</span><span class="n">exec_start</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 计算上一个时间片的持续时长</span>
<span class="w">    </span><span class="n">last_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">se</span><span class="p">.</span><span class="n">sum_exec_runtime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">se</span><span class="p">.</span><span class="n">prev_sum_exec_runtime</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 计算结束时间 = 开始时间 + 持续时长</span>
<span class="w">    </span><span class="n">kinfo</span><span class="p">.</span><span class="n">sched_end_ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">se</span><span class="p">.</span><span class="n">exec_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">last_duration</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// --- &quot;是否上报&quot; ---</span>
<span class="w">    </span><span class="n">kinfo</span><span class="p">.</span><span class="n">report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/* --- 4. 一次性、原子性地写入 --- */</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">copy_to_user</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">user_buf</span><span class="p">[</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">current_count</span><span class="p">],</span><span class="w"> </span><span class="o">&amp;</span><span class="n">kinfo</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">kinfo</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_WARNING</span><span class="w"> </span><span class="s">&quot;[proc_dfs] copy_to_user 失败! 停止。</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">max_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/* --- 5. 写入成功，递增计数器 --- */</span>
<span class="w">    </span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">current_count</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="n">kinfo</span><span class="p">.</span><span class="n">report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 已上报</span>

<span class="w">    </span><span class="cm">/* --- 6. 递归 --- */</span>
<span class="w">    </span><span class="n">list_for_each_entry</span><span class="p">(</span><span class="n">child</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">task</span><span class="o">-&gt;</span><span class="n">children</span><span class="p">,</span><span class="w"> </span><span class="n">sibling</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">kernel_dfs_traverse</span><span class="p">(</span><span class="n">child</span><span class="p">,</span><span class="w"> </span><span class="n">ctx</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">max_count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
   对于每一个进程，从 task_struct 中获取所需的 proc_dfs_info，然后写入缓冲区，最后使用 <code>list_for_each_entry</code> 宏递归地对子进程进行遍历。</p>
</li>
<li>
<p><strong>填充系统调用骨架</strong>
   <div class="highlight"><pre><span></span><code><span class="n">SYSCALL_DEFINE3</span><span class="p">(</span><span class="n">proc_dfs</span><span class="p">,</span>
<span class="w">                </span><span class="kt">pid_t</span><span class="p">,</span><span class="w"> </span><span class="n">top_pid</span><span class="p">,</span>
<span class="w">                </span><span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="w"> </span><span class="n">__user</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span>
<span class="w">                </span><span class="kt">size_t</span><span class="p">,</span><span class="w"> </span><span class="n">buf_size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="n">start_task</span><span class="p">;</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">dfs_context</span><span class="w"> </span><span class="n">ctx</span><span class="p">;</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">process_count</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 内核调试日志</span>
<span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;[proc_dfs] 系统调用被触发!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;[proc_dfs] 目标 PID: %d, 缓冲区地址: %p, 缓冲区大小: %ld 字节</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">            </span><span class="n">top_pid</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">buf_size</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 参数合法性检查</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">buf</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">buf_size</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_WARNING</span><span class="w"> </span><span class="s">&quot;[proc_dfs] 缓冲区无效！buf: %p, buf_size: %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">                </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">buf_size</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">user_buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buf</span><span class="p">;</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">current_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">max_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buf_size</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="p">);</span>
<span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;[proc_dfs] 缓冲区最多可容纳 %ld 个进程记录。</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">max_count</span><span class="p">);</span>

<span class="w">    </span><span class="n">rcu_read_lock</span><span class="p">();</span>
<span class="w">    </span><span class="n">start_task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">find_task_by_vpid</span><span class="p">(</span><span class="n">top_pid</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">start_task</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_WARNING</span><span class="w"> </span><span class="s">&quot;[porc_dfs] PID %d 未找到！</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">top_pid</span><span class="p">);</span>
<span class="w">        </span><span class="n">rcu_read_unlock</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="n">ESRCH</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;[proc_dfs] 成功找到 PID %d，开始DFS遍历...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">top_pid</span><span class="p">);</span>

<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="n">child</span><span class="p">;</span>
<span class="w">    </span><span class="n">list_for_each_entry</span><span class="p">(</span><span class="n">child</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">start_task</span><span class="o">-&gt;</span><span class="n">children</span><span class="p">,</span><span class="w"> </span><span class="n">sibling</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">kernel_dfs_traverse</span><span class="p">(</span><span class="n">child</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">rcu_read_unlock</span><span class="p">();</span>
<span class="w">    </span><span class="n">process_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">current_count</span><span class="p">;</span>
<span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;[proc_dfs] 遍历完成，总共找到 %ld 个后代进程。</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">process_count</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">process_count</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
   创建一个 dfs 的上下文变量 ctx 用于记录缓冲区使用情况，并对其进行初始化；在用 kernel_dfs_traverse 对进程进行访问的前后，使用 <code>rcu_read_lock()</code> 和 <code>rcu_read_unlock()</code> 来加锁，保证读取安全；使用 <code>find_task_by_vpid</code> 来得到传入 id 的进程；对每一个子进程，调用 kernel_dfs_traverse 进行遍历。</p>
</li>
<li>
<p><strong>修改用户测试程序</strong>
   <div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">proc_dfs_info</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buf_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">num_procs_found</span><span class="p">;</span><span class="w"> </span><span class="c1">// 内核将返回找到的进程数</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;用法: %s &lt;PID&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;例如: %s 1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;正在调用 sys_proc_dfs (syscall #%d) ...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">__NR_proc_dfs</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;目标 PID: %d, 缓冲区大小: %ld 字节</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="n">buf_size</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// -- 调用系统调用 --</span>
<span class="w">    </span><span class="n">num_procs_found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">syscall</span><span class="p">(</span><span class="n">__NR_proc_dfs</span><span class="p">,</span><span class="w"> </span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">buf_size</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">num_procs_found</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;syscall(proc_dfs) 失败&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">num_procs_found</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;系统调用成功！未找到后代进程。</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;系统调用成功！内核返回了 %ld 个后代进程记录：</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">num_procs_found</span><span class="p">);</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;PID</span><span class="se">\t</span><span class="s"> 状态</span><span class="se">\t</span><span class="s"> 父PID</span><span class="se">\t</span><span class="s"> 首子PID</span><span class="se">\t</span><span class="s"> 兄PID</span><span class="se">\t</span><span class="s"> 用户态(ns)</span><span class="se">\t</span><span class="s"> 内核态(ns)</span><span class="se">\t</span><span class="s"> 调度开始(ns)</span><span class="se">\t\t</span><span class="s"> 调度结束(ns)</span><span class="se">\t</span><span class="s"> 是否上报</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;------------------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">num_procs_found</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\t</span><span class="s"> %d</span><span class="se">\t</span><span class="s"> %d</span><span class="se">\t</span><span class="s"> %d</span><span class="se">\t\t</span><span class="s"> %d</span><span class="se">\t</span><span class="s"> %ld</span><span class="se">\t\t</span><span class="s"> %ld</span><span class="se">\t\t</span><span class="s"> %llu</span><span class="se">\t</span><span class="s"> %llu</span><span class="se">\t</span><span class="s"> %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">pid</span><span class="p">,</span>
<span class="w">                </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">state</span><span class="p">,</span>
<span class="w">                </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">parent_pid</span><span class="p">,</span>
<span class="w">                </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">first_child_pid</span><span class="p">,</span>
<span class="w">                </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">next_sibling_pid</span><span class="p">,</span>
<span class="w">                </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">utime</span><span class="p">,</span>
<span class="w">                </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">stime</span><span class="p">,</span>
<span class="w">                </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sched_start_ns</span><span class="p">,</span>
<span class="w">                </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sched_end_ns</span><span class="p">,</span>
<span class="w">                </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">report</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
   进行系统调用，并将信息打印成表格。</p>
</li>
<li>
<p><strong>安装与测试</strong></p>
</li>
</ol>
<p>重新编译内核，安装并重启，然后编译运行用户测试程序。</p>
<h2 id="_9">实验结果</h2>
<p>编译最后的测试程序，运行 <code>test_dfs 1</code>，结果如下：</p>
<div class="highlight"><pre><span></span><code>wuyukai@wuyukai-VMware-Virtual-Platform:~$<span class="w"> </span>./test_dfs<span class="w"> </span><span class="m">1</span>
正在调用<span class="w"> </span>sys_proc_dfs<span class="w"> </span><span class="o">(</span>syscall<span class="w"> </span><span class="c1">#549) ...</span>
目标<span class="w"> </span>PID:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span>缓冲区大小:<span class="w"> </span><span class="m">6400</span><span class="w"> </span>字节
系统调用成功！内核返回了<span class="w"> </span><span class="m">100</span><span class="w"> </span>个后代进程记录：

PID<span class="w">      </span>状态<span class="w">    </span>父PID<span class="w">   </span>首子PID<span class="w">         </span>兄PID<span class="w">   </span>用户态<span class="o">(</span>ns<span class="o">)</span><span class="w">      </span>内核态<span class="o">(</span>ns<span class="o">)</span><span class="w">      </span>调度开始<span class="o">(</span>ns<span class="o">)</span><span class="w">           </span>调度结束<span class="o">(</span>ns<span class="o">)</span><span class="w">     </span>是否上报
----------------------------------------------------------------------------------------------------------------------------------------------------------------
<span class="m">544</span><span class="w">      </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">561</span><span class="w">     </span><span class="m">107000000</span><span class="w">               </span><span class="m">118000000</span><span class="w">               </span><span class="m">79369766971</span><span class="w">     </span><span class="m">79369821202</span><span class="w">     </span><span class="m">0</span>
<span class="m">561</span><span class="w">      </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">606</span><span class="w">     </span><span class="m">22000000</span><span class="w">                </span><span class="m">16000000</span><span class="w">                </span><span class="m">99864731908</span><span class="w">     </span><span class="m">99865023368</span><span class="w">     </span><span class="m">0</span>
<span class="m">606</span><span class="w">      </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">613</span><span class="w">     </span><span class="m">11000000</span><span class="w">                </span><span class="m">15000000</span><span class="w">                </span><span class="m">75392887420</span><span class="w">     </span><span class="m">75393031595</span><span class="w">     </span><span class="m">0</span>
<span class="m">613</span><span class="w">      </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">616</span><span class="w">     </span><span class="m">19000000</span><span class="w">                </span><span class="m">28000000</span><span class="w">                </span><span class="m">91164404923</span><span class="w">     </span><span class="m">91164554888</span><span class="w">     </span><span class="m">0</span>
<span class="m">616</span><span class="w">      </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1349</span><span class="w">    </span><span class="m">126000000</span><span class="w">               </span><span class="m">83000000</span><span class="w">                </span><span class="m">60621728406</span><span class="w">     </span><span class="m">60621928507</span><span class="w">     </span><span class="m">0</span>
<span class="m">1349</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1351</span><span class="w">    </span><span class="m">2000000</span><span class="w">                 </span><span class="m">3000000</span><span class="w">                 </span><span class="m">12855576696</span><span class="w">     </span><span class="m">12855619296</span><span class="w">     </span><span class="m">0</span>
<span class="m">1351</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">1422</span><span class="w">            </span><span class="m">1352</span><span class="w">    </span><span class="m">6000000</span><span class="w">                 </span><span class="m">15000000</span><span class="w">                </span><span class="m">99815140906</span><span class="w">     </span><span class="m">99815211246</span><span class="w">     </span><span class="m">0</span>
<span class="m">1422</span><span class="w">     </span><span class="m">8193</span><span class="w">    </span><span class="m">1351</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">               </span><span class="m">13130215843</span><span class="w">     </span><span class="m">13130219384</span><span class="w">     </span><span class="m">0</span>
<span class="m">1352</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1357</span><span class="w">    </span><span class="m">125000000</span><span class="w">               </span><span class="m">65000000</span><span class="w">                </span><span class="m">80206570229</span><span class="w">     </span><span class="m">80206879186</span><span class="w">     </span><span class="m">0</span>
<span class="m">1357</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1368</span><span class="w">    </span><span class="m">11000000</span><span class="w">                </span><span class="m">13000000</span><span class="w">                </span><span class="m">14002669395</span><span class="w">     </span><span class="m">14002763954</span><span class="w">     </span><span class="m">0</span>
<span class="m">1368</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1381</span><span class="w">    </span><span class="m">83000000</span><span class="w">                </span><span class="m">54000000</span><span class="w">                </span><span class="m">76130952271</span><span class="w">     </span><span class="m">76130957691</span><span class="w">     </span><span class="m">0</span>
<span class="m">1381</span><span class="w">     </span><span class="m">8193</span><span class="w">    </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1382</span><span class="w">    </span><span class="m">44000000</span><span class="w">                </span><span class="m">803000000</span><span class="w">               </span><span class="m">14172405048</span><span class="w">     </span><span class="m">14172408299</span><span class="w">     </span><span class="m">0</span>
<span class="m">1382</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1388</span><span class="w">    </span><span class="m">15000000</span><span class="w">                </span><span class="m">29000000</span><span class="w">                </span><span class="m">69696448658</span><span class="w">     </span><span class="m">69696460936</span><span class="w">     </span><span class="m">0</span>
<span class="m">1388</span><span class="w">     </span><span class="m">8193</span><span class="w">    </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1390</span><span class="w">    </span><span class="m">2000000</span><span class="w">                 </span><span class="m">5000000</span><span class="w">                 </span><span class="m">78964019084</span><span class="w">     </span><span class="m">78964062445</span><span class="w">     </span><span class="m">0</span>
<span class="m">1390</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1395</span><span class="w">    </span><span class="m">9000000</span><span class="w">                 </span><span class="m">17000000</span><span class="w">                </span><span class="m">15490356330</span><span class="w">     </span><span class="m">15490420098</span><span class="w">     </span><span class="m">0</span>
<span class="m">1395</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1400</span><span class="w">    </span><span class="m">40000000</span><span class="w">                </span><span class="m">46000000</span><span class="w">                </span><span class="m">76606692000</span><span class="w">     </span><span class="m">76606697233</span><span class="w">     </span><span class="m">0</span>
<span class="m">1400</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1411</span><span class="w">    </span><span class="m">26000000</span><span class="w">                </span><span class="m">36000000</span><span class="w">                </span><span class="m">69696614986</span><span class="w">     </span><span class="m">69696633825</span><span class="w">     </span><span class="m">0</span>
<span class="m">1411</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1448</span><span class="w">    </span><span class="m">18000000</span><span class="w">                </span><span class="m">6000000</span><span class="w">                 </span><span class="m">13056056773</span><span class="w">     </span><span class="m">13056124258</span><span class="w">     </span><span class="m">0</span>
<span class="m">1448</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1451</span><span class="w">    </span><span class="m">19000000</span><span class="w">                </span><span class="m">48000000</span><span class="w">                </span><span class="m">76031503650</span><span class="w">     </span><span class="m">76031649401</span><span class="w">     </span><span class="m">0</span>
<span class="m">1451</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1489</span><span class="w">    </span><span class="m">1000000</span><span class="w">                 </span><span class="m">19000000</span><span class="w">                </span><span class="m">93239783783</span><span class="w">     </span><span class="m">93239819667</span><span class="w">     </span><span class="m">0</span>
<span class="m">1489</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1588</span><span class="w">    </span><span class="m">26000000</span><span class="w">                </span><span class="m">42000000</span><span class="w">                </span><span class="m">69696596147</span><span class="w">     </span><span class="m">69696610688</span><span class="w">     </span><span class="m">0</span>
<span class="m">1588</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">1603</span><span class="w">            </span><span class="m">1591</span><span class="w">    </span><span class="m">10000000</span><span class="w">                </span><span class="m">18000000</span><span class="w">                </span><span class="m">49233498121</span><span class="w">     </span><span class="m">49233566798</span><span class="w">     </span><span class="m">0</span>
<span class="m">1603</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1588</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">       </span><span class="m">3000000</span><span class="w">                 </span><span class="m">2000000</span><span class="w">                 </span><span class="m">13926085085</span><span class="w">     </span><span class="m">13926097562</span><span class="w">     </span><span class="m">0</span>
<span class="m">1591</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1611</span><span class="w">    </span><span class="m">66000000</span><span class="w">                </span><span class="m">20000000</span><span class="w">                </span><span class="m">14017484583</span><span class="w">     </span><span class="m">14017866238</span><span class="w">     </span><span class="m">0</span>
<span class="m">1611</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">1617</span><span class="w">            </span><span class="m">1624</span><span class="w">    </span><span class="m">5000000</span><span class="w">                 </span><span class="m">6000000</span><span class="w">                 </span><span class="m">16714207457</span><span class="w">     </span><span class="m">16714247802</span><span class="w">     </span><span class="m">0</span>
<span class="m">1617</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1611</span><span class="w">    </span><span class="m">1697</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">3000000</span><span class="w">                 </span><span class="m">11000000</span><span class="w">                </span><span class="m">14318180136</span><span class="w">     </span><span class="m">14318550074</span><span class="w">     </span><span class="m">0</span>
<span class="m">1697</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1617</span><span class="w">    </span><span class="m">1738</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">4000000</span><span class="w">                 </span><span class="m">2000000</span><span class="w">                 </span><span class="m">14383255648</span><span class="w">     </span><span class="m">14383283060</span><span class="w">     </span><span class="m">0</span>
<span class="m">1738</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1697</span><span class="w">    </span><span class="m">1740</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">1000000</span><span class="w">                 </span><span class="m">1000000</span><span class="w">                 </span><span class="m">14393999867</span><span class="w">     </span><span class="m">14394102101</span><span class="w">     </span><span class="m">0</span>
<span class="m">1740</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1738</span><span class="w">    </span><span class="m">2281</span><span class="w">            </span><span class="m">1765</span><span class="w">    </span><span class="m">38000000</span><span class="w">                </span><span class="m">34000000</span><span class="w">                </span><span class="m">76605822162</span><span class="w">     </span><span class="m">76605959078</span><span class="w">     </span><span class="m">0</span>
<span class="m">2281</span><span class="w">     </span><span class="m">128</span><span class="w">     </span><span class="m">1740</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1000000</span><span class="w">                 </span><span class="m">16773897505</span><span class="w">    </span><span class="m">16773901749</span><span class="w">      </span><span class="m">0</span>
<span class="m">1765</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1738</span><span class="w">    </span><span class="m">1836</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">25000000</span><span class="w">                </span><span class="m">24000000</span><span class="w">                </span><span class="m">69695502068</span><span class="w">     </span><span class="m">69695551143</span><span class="w">     </span><span class="m">0</span>
<span class="m">1836</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">1896</span><span class="w">            </span><span class="m">1956</span><span class="w">    </span><span class="m">941000000</span><span class="w">               </span><span class="m">336000000</span><span class="w">               </span><span class="m">80207991064</span><span class="w">     </span><span class="m">80208563414</span><span class="w">     </span><span class="m">0</span>
<span class="m">1896</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1836</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2138</span><span class="w">    </span><span class="m">40000000</span><span class="w">                </span><span class="m">41000000</span><span class="w">                </span><span class="m">41256202133</span><span class="w">     </span><span class="m">41256223190</span><span class="w">     </span><span class="m">0</span>
<span class="m">2138</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1836</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2143</span><span class="w">    </span><span class="m">64000000</span><span class="w">                </span><span class="m">24000000</span><span class="w">                </span><span class="m">41504245270</span><span class="w">     </span><span class="m">41504397821</span><span class="w">     </span><span class="m">0</span>
<span class="m">2143</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1836</span><span class="w">    </span><span class="m">2155</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">19000000</span><span class="w">                </span><span class="m">8000000</span><span class="w">                 </span><span class="m">46204908663</span><span class="w">     </span><span class="m">46204916159</span><span class="w">     </span><span class="m">0</span>
<span class="m">2155</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2143</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2223</span><span class="w">    </span><span class="m">4000000</span><span class="w">                 </span><span class="m">1000000</span><span class="w">                 </span><span class="m">16137161008</span><span class="w">     </span><span class="m">16137182789</span><span class="w">     </span><span class="m">0</span>
<span class="m">2223</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2143</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">       </span><span class="m">2000000</span><span class="w">                 </span><span class="m">1000000</span><span class="w">                 </span><span class="m">16385586344</span><span class="w">     </span><span class="m">16385607663</span><span class="w">     </span><span class="m">0</span>
<span class="m">1956</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1959</span><span class="w">    </span><span class="m">5000000</span><span class="w">                 </span><span class="m">6000000</span><span class="w">                 </span><span class="m">16699314183</span><span class="w">     </span><span class="m">16699342785</span><span class="w">     </span><span class="m">0</span>
<span class="m">1959</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1977</span><span class="w">    </span><span class="m">49000000</span><span class="w">                </span><span class="m">24000000</span><span class="w">                </span><span class="m">32212090457</span><span class="w">     </span><span class="m">32212110410</span><span class="w">     </span><span class="m">0</span>
<span class="m">1977</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1982</span><span class="w">    </span><span class="m">20000000</span><span class="w">                </span><span class="m">26000000</span><span class="w">                </span><span class="m">42914576764</span><span class="w">     </span><span class="m">42914672637</span><span class="w">     </span><span class="m">0</span>
<span class="m">1982</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1985</span><span class="w">    </span><span class="m">28000000</span><span class="w">                </span><span class="m">17000000</span><span class="w">                </span><span class="m">46292998467</span><span class="w">     </span><span class="m">46293069392</span><span class="w">     </span><span class="m">0</span>
<span class="m">1985</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1988</span><span class="w">    </span><span class="m">6000000</span><span class="w">                 </span><span class="m">9000000</span><span class="w">                 </span><span class="m">16699226093</span><span class="w">     </span><span class="m">16699241029</span><span class="w">     </span><span class="m">0</span>
<span class="m">1988</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2001</span><span class="w">    </span><span class="m">3000000</span><span class="w">                 </span><span class="m">4000000</span><span class="w">                 </span><span class="m">16699004705</span><span class="w">     </span><span class="m">16699031894</span><span class="w">     </span><span class="m">0</span>
<span class="m">2001</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2006</span><span class="w">    </span><span class="m">5000000</span><span class="w">                 </span><span class="m">2000000</span><span class="w">                 </span><span class="m">16699079207</span><span class="w">     </span><span class="m">16699105762</span><span class="w">     </span><span class="m">0</span>
<span class="m">2006</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2009</span><span class="w">    </span><span class="m">5000000</span><span class="w">                 </span><span class="m">2000000</span><span class="w">                 </span><span class="m">16698925517</span><span class="w">     </span><span class="m">16698952979</span><span class="w">     </span><span class="m">0</span>
<span class="m">2009</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2028</span><span class="w">    </span><span class="m">36000000</span><span class="w">                </span><span class="m">22000000</span><span class="w">                </span><span class="m">69689326374</span><span class="w">     </span><span class="m">69689348540</span><span class="w">     </span><span class="m">0</span>
<span class="m">2028</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2030</span><span class="w">    </span><span class="m">5000000</span><span class="w">                 </span><span class="m">2000000</span><span class="w">                 </span><span class="m">16699212301</span><span class="w">     </span><span class="m">16699239200</span><span class="w">     </span><span class="m">0</span>
<span class="m">2030</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2036</span><span class="w">    </span><span class="m">6000000</span><span class="w">                 </span><span class="m">4000000</span><span class="w">                 </span><span class="m">16698971479</span><span class="w">     </span><span class="m">16699002186</span><span class="w">     </span><span class="m">0</span>
<span class="m">2036</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2041</span><span class="w">    </span><span class="m">3000000</span><span class="w">                 </span><span class="m">3000000</span><span class="w">                 </span><span class="m">16699207640</span><span class="w">     </span><span class="m">16699231871</span><span class="w">     </span><span class="m">0</span>
<span class="m">2041</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2048</span><span class="w">    </span><span class="m">7000000</span><span class="w">                 </span><span class="m">1000000</span><span class="w">                 </span><span class="m">46875506069</span><span class="w">     </span><span class="m">46875968787</span><span class="w">     </span><span class="m">0</span>
<span class="m">2048</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1765</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">       </span><span class="m">33000000</span><span class="w">                </span><span class="m">14000000</span><span class="w">                </span><span class="m">69689169401</span><span class="w">     </span><span class="m">69689204840</span><span class="w">     </span><span class="m">0</span>
<span class="m">1624</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1630</span><span class="w">    </span><span class="m">14000000</span><span class="w">                </span><span class="m">13000000</span><span class="w">                </span><span class="m">76130943602</span><span class="w">     </span><span class="m">76130975685</span><span class="w">     </span><span class="m">0</span>
<span class="m">1630</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">1631</span><span class="w">            </span><span class="m">1737</span><span class="w">    </span><span class="m">88000000</span><span class="w">                </span><span class="m">34000000</span><span class="w">                </span><span class="m">46877142485</span><span class="w">     </span><span class="m">46879119226</span><span class="w">     </span><span class="m">0</span>
<span class="m">1631</span><span class="w">     </span><span class="m">8193</span><span class="w">    </span><span class="m">1630</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1687</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">               </span><span class="m">14123124750</span><span class="w">     </span><span class="m">14123186621</span><span class="w">     </span><span class="m">0</span>
<span class="m">1687</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1630</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1688</span><span class="w">    </span><span class="m">4000000</span><span class="w">                 </span><span class="m">2000000</span><span class="w">                 </span><span class="m">16771122465</span><span class="w">     </span><span class="m">16771154051</span><span class="w">     </span><span class="m">0</span>
<span class="m">1688</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1630</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1693</span><span class="w">    </span><span class="m">12000000</span><span class="w">                </span><span class="m">19000000</span><span class="w">                </span><span class="m">16717247308</span><span class="w">     </span><span class="m">16717261986</span><span class="w">     </span><span class="m">0</span>
<span class="m">1693</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1630</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1698</span><span class="w">    </span><span class="m">9000000</span><span class="w">                 </span><span class="m">2000000</span><span class="w">                 </span><span class="m">14383261257</span><span class="w">     </span><span class="m">14383267695</span><span class="w">     </span><span class="m">0</span>
<span class="m">1698</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1630</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1699</span><span class="w">    </span><span class="m">65000000</span><span class="w">                </span><span class="m">37000000</span><span class="w">                </span><span class="m">69695580955</span><span class="w">     </span><span class="m">69695617064</span><span class="w">     </span><span class="m">0</span>
<span class="m">1699</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1630</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1700</span><span class="w">    </span><span class="m">16000000</span><span class="w">                </span><span class="m">6000000</span><span class="w">                 </span><span class="m">16727499037</span><span class="w">     </span><span class="m">16727536663</span><span class="w">     </span><span class="m">0</span>
<span class="m">1700</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1630</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1772</span><span class="w">    </span><span class="m">2000000</span><span class="w">                 </span><span class="m">6000000</span><span class="w">                 </span><span class="m">16771089792</span><span class="w">     </span><span class="m">16771161815</span><span class="w">     </span><span class="m">0</span>
<span class="m">1772</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1630</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">1776</span><span class="w">    </span><span class="m">7000000</span><span class="w">                 </span><span class="m">4000000</span><span class="w">                 </span><span class="m">16771135760</span><span class="w">     </span><span class="m">16771149241</span><span class="w">     </span><span class="m">0</span>
<span class="m">1776</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1630</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2283</span><span class="w">    </span><span class="m">6000000</span><span class="w">                 </span><span class="m">2000000</span><span class="w">                 </span><span class="m">14443816226</span><span class="w">     </span><span class="m">14443853139</span><span class="w">     </span><span class="m">0</span>
<span class="m">2283</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1630</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">       </span><span class="m">2000000</span><span class="w">                 </span><span class="m">5000000</span><span class="w">                 </span><span class="m">16771899040</span><span class="w">     </span><span class="m">16771932665</span><span class="w">     </span><span class="m">0</span>
<span class="m">1737</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1754</span><span class="w">    </span><span class="m">10000000</span><span class="w">                </span><span class="m">8000000</span><span class="w">                 </span><span class="m">46781354145</span><span class="w">     </span><span class="m">46781397514</span><span class="w">     </span><span class="m">0</span>
<span class="m">1754</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1889</span><span class="w">    </span><span class="m">13000000</span><span class="w">                </span><span class="m">18000000</span><span class="w">                </span><span class="m">69696426082</span><span class="w">     </span><span class="m">69696444731</span><span class="w">     </span><span class="m">0</span>
<span class="m">1889</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">1895</span><span class="w">            </span><span class="m">1899</span><span class="w">    </span><span class="m">2000000</span><span class="w">                 </span><span class="m">0</span><span class="w">               </span><span class="m">16657779189</span><span class="w">    </span><span class="m">16657841361</span><span class="w">      </span><span class="m">0</span>
<span class="m">1895</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1889</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">       </span><span class="m">3000000</span><span class="w">                 </span><span class="m">3000000</span><span class="w">                 </span><span class="m">16709365228</span><span class="w">     </span><span class="m">16709375860</span><span class="w">     </span><span class="m">0</span>
<span class="m">1899</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1898</span><span class="w">    </span><span class="m">57000000</span><span class="w">                </span><span class="m">25000000</span><span class="w">                </span><span class="m">16016890997</span><span class="w">     </span><span class="m">16016897392</span><span class="w">     </span><span class="m">0</span>
<span class="m">1898</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1933</span><span class="w">    </span><span class="m">3000000</span><span class="w">                 </span><span class="m">4000000</span><span class="w">                 </span><span class="m">16709024906</span><span class="w">     </span><span class="m">16709125173</span><span class="w">     </span><span class="m">0</span>
<span class="m">1933</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1943</span><span class="w">    </span><span class="m">3000000</span><span class="w">                 </span><span class="m">1000000</span><span class="w">                 </span><span class="m">16247679511</span><span class="w">     </span><span class="m">16247697655</span><span class="w">     </span><span class="m">0</span>
<span class="m">1943</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1953</span><span class="w">    </span><span class="m">10000000</span><span class="w">                </span><span class="m">9000000</span><span class="w">                 </span><span class="m">96116749338</span><span class="w">     </span><span class="m">96116785477</span><span class="w">     </span><span class="m">0</span>
<span class="m">1953</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">1941</span><span class="w">    </span><span class="m">16000000</span><span class="w">                </span><span class="m">24000000</span><span class="w">                </span><span class="m">69696581606</span><span class="w">     </span><span class="m">69696595288</span><span class="w">     </span><span class="m">0</span>
<span class="m">1941</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">2157</span><span class="w">    </span><span class="m">32000000</span><span class="w">                </span><span class="m">9000000</span><span class="w">                 </span><span class="m">36212177193</span><span class="w">     </span><span class="m">36212303057</span><span class="w">     </span><span class="m">0</span>
<span class="m">2157</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">2159</span><span class="w">    </span><span class="m">30000000</span><span class="w">                </span><span class="m">8000000</span><span class="w">                 </span><span class="m">16234133565</span><span class="w">     </span><span class="m">16234166973</span><span class="w">     </span><span class="m">0</span>
<span class="m">2159</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">2182</span><span class="w">    </span><span class="m">3000000</span><span class="w">                 </span><span class="m">1000000</span><span class="w">                 </span><span class="m">76605889353</span><span class="w">     </span><span class="m">76605902239</span><span class="w">     </span><span class="m">0</span>
<span class="m">2182</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">2227</span><span class="w">    </span><span class="m">3000000</span><span class="w">                 </span><span class="m">7000000</span><span class="w">                 </span><span class="m">16242899896</span><span class="w">     </span><span class="m">16242923677</span><span class="w">     </span><span class="m">0</span>
<span class="m">2227</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">2214</span><span class="w">    </span><span class="m">32000000</span><span class="w">                </span><span class="m">12000000</span><span class="w">                </span><span class="m">36212228032</span><span class="w">     </span><span class="m">36212349116</span><span class="w">     </span><span class="m">0</span>
<span class="m">2214</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">2274</span><span class="w">    </span><span class="m">60000000</span><span class="w">                </span><span class="m">16000000</span><span class="w">                </span><span class="m">76601876223</span><span class="w">     </span><span class="m">76601901776</span><span class="w">     </span><span class="m">0</span>
<span class="m">2274</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">2185</span><span class="w">    </span><span class="m">53000000</span><span class="w">                </span><span class="m">14000000</span><span class="w">                </span><span class="m">33217599737</span><span class="w">     </span><span class="m">33217692862</span><span class="w">     </span><span class="m">0</span>
<span class="m">2185</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">2321</span><span class="w">    </span><span class="m">8000000</span><span class="w">                 </span><span class="m">10000000</span><span class="w">                </span><span class="m">76606339717</span><span class="w">     </span><span class="m">76606346047</span><span class="w">     </span><span class="m">0</span>
<span class="m">2321</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">2324</span><span class="w">            </span><span class="m">2328</span><span class="w">    </span><span class="m">5000000</span><span class="w">                 </span><span class="m">7000000</span><span class="w">                 </span><span class="m">69684523983</span><span class="w">     </span><span class="m">69684562481</span><span class="w">     </span><span class="m">0</span>
<span class="m">2324</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2321</span><span class="w">    </span><span class="m">2472</span><span class="w">            </span><span class="m">2644</span><span class="w">    </span><span class="m">7000000</span><span class="w">                 </span><span class="m">15000000</span><span class="w">                </span><span class="m">46886144628</span><span class="w">     </span><span class="m">46886166818</span><span class="w">     </span><span class="m">0</span>
<span class="m">2472</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2324</span><span class="w">    </span><span class="m">2491</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">1000000</span><span class="w">                 </span><span class="m">7000000</span><span class="w">                 </span><span class="m">47126285332</span><span class="w">     </span><span class="m">47126528845</span><span class="w">     </span><span class="m">0</span>
<span class="m">2491</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2472</span><span class="w">    </span><span class="m">2524</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">3000000</span><span class="w">                 </span><span class="m">8000000</span><span class="w">                 </span><span class="m">47126193896</span><span class="w">     </span><span class="m">47126200270</span><span class="w">     </span><span class="m">0</span>
<span class="m">2524</span><span class="w">     </span><span class="m">8193</span><span class="w">    </span><span class="m">2491</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2580</span><span class="w">    </span><span class="m">40000000</span><span class="w">                </span><span class="m">51000000</span><span class="w">                </span><span class="m">100480894434</span><span class="w">    </span><span class="m">100480903653</span><span class="w">    </span><span class="m">0</span>
<span class="m">2580</span><span class="w">     </span><span class="m">8193</span><span class="w">    </span><span class="m">2491</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">               </span><span class="m">2000000</span><span class="w">                 </span><span class="m">47127315917</span><span class="w">    </span><span class="m">47127378508</span><span class="w">      </span><span class="m">0</span>
<span class="m">2644</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2321</span><span class="w">    </span><span class="m">2681</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">6000000</span><span class="w">                 </span><span class="m">8000000</span><span class="w">                 </span><span class="m">69780582492</span><span class="w">     </span><span class="m">69780622526</span><span class="w">     </span><span class="m">0</span>
<span class="m">2681</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2644</span><span class="w">    </span><span class="m">2682</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">17000000</span><span class="w">                </span><span class="m">73000000</span><span class="w">                </span><span class="m">100480885215</span><span class="w">    </span><span class="m">100480956386</span><span class="w">    </span><span class="m">0</span>
<span class="m">2682</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2681</span><span class="w">    </span><span class="m">2683</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">2000000</span><span class="w">                 </span><span class="m">1000000</span><span class="w">                 </span><span class="m">69784198308</span><span class="w">     </span><span class="m">69784207587</span><span class="w">     </span><span class="m">0</span>
<span class="m">2683</span><span class="w">     </span><span class="m">8193</span><span class="w">    </span><span class="m">2682</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">       </span><span class="m">1000000</span><span class="w">                 </span><span class="m">0</span><span class="w">               </span><span class="m">69784738165</span><span class="w">    </span><span class="m">69785880778</span><span class="w">      </span><span class="m">0</span>
<span class="m">2328</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">1</span><span class="w">       </span><span class="m">2329</span><span class="w">            </span><span class="m">0</span><span class="w">       </span><span class="m">56000000</span><span class="w">                </span><span class="m">38000000</span><span class="w">                </span><span class="m">47768809274</span><span class="w">     </span><span class="m">47769250023</span><span class="w">     </span><span class="m">0</span>
<span class="m">2329</span><span class="w">     </span><span class="m">8193</span><span class="w">    </span><span class="m">2328</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2342</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">               </span><span class="m">46572691908</span><span class="w">     </span><span class="m">46572876578</span><span class="w">     </span><span class="m">0</span>
<span class="m">2342</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2328</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2343</span><span class="w">    </span><span class="m">4000000</span><span class="w">                 </span><span class="m">4000000</span><span class="w">                 </span><span class="m">46882292384</span><span class="w">     </span><span class="m">46882346218</span><span class="w">     </span><span class="m">0</span>
<span class="m">2343</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2328</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2345</span><span class="w">    </span><span class="m">10000000</span><span class="w">                </span><span class="m">7000000</span><span class="w">                 </span><span class="m">46806415830</span><span class="w">     </span><span class="m">46806452436</span><span class="w">     </span><span class="m">0</span>
<span class="m">2345</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2328</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2349</span><span class="w">    </span><span class="m">10000000</span><span class="w">                </span><span class="m">5000000</span><span class="w">                 </span><span class="m">46747240429</span><span class="w">     </span><span class="m">46747723323</span><span class="w">     </span><span class="m">0</span>
<span class="m">2349</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2328</span><span class="w">    </span><span class="m">2633</span><span class="w">            </span><span class="m">2350</span><span class="w">    </span><span class="m">18000000</span><span class="w">                </span><span class="m">266000000</span><span class="w">               </span><span class="m">47817028499</span><span class="w">     </span><span class="m">47817466726</span><span class="w">     </span><span class="m">0</span>
<span class="m">2633</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2349</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">0</span><span class="w">       </span><span class="m">6000000</span><span class="w">                 </span><span class="m">58000000</span><span class="w">                </span><span class="m">69690634211</span><span class="w">     </span><span class="m">69690754811</span><span class="w">     </span><span class="m">0</span>
<span class="m">2350</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2328</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2351</span><span class="w">    </span><span class="m">32000000</span><span class="w">                </span><span class="m">13000000</span><span class="w">                </span><span class="m">69695482399</span><span class="w">     </span><span class="m">69695536988</span><span class="w">     </span><span class="m">0</span>
<span class="m">2351</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2328</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2352</span><span class="w">    </span><span class="m">5000000</span><span class="w">                 </span><span class="m">9000000</span><span class="w">                 </span><span class="m">46802348549</span><span class="w">     </span><span class="m">46802373257</span><span class="w">     </span><span class="m">0</span>
<span class="m">2352</span><span class="w">     </span><span class="m">1</span><span class="w">       </span><span class="m">2328</span><span class="w">    </span><span class="m">0</span><span class="w">               </span><span class="m">2449</span><span class="w">    </span><span class="m">6000000</span><span class="w">                 </span><span class="m">8000000</span><span class="w">                 </span><span class="m">46882276093</span><span class="w">     </span><span class="m">46882385109</span><span class="w">     </span><span class="m">0</span>
</code></pre></div>
<p>观察 pid 的顺序可以得知，该系统调用已经正确遍历了进程树，用户程序通过读取传入的缓冲区，输出了每条进程对应的信息。最后一列"是否上报"在我这里的实现是，写入缓冲区前是 0，写入之后置为 1，因此缓冲区内全为 0，符合预期。</p>
<h2 id="_10">实验总结与反思</h2>
<p>本次实验成功地在 Linux 内核 (版本 6.14.0) 中添加了一个新的系统调用 <code>sys_proc_dfs</code>。该调用能够按深度优先顺序遍历指定进程的后代，收集包括 PID、状态、运行时间、亲缘关系、调度时间戳在内的信息，并通过用户提供的缓冲区返回给用户态程序。用户态测试程序也成功实现了对该系统调用的调用和结果的格式化展示。</p>
<p>在本次实验中，大部分时间花在了环境配置上。我这次先跑通 hello world，再跑通 <code>sys_proc_dfs</code> 的骨架，最后实现 dfs 的细节，这一过程看似绕路，实则我觉得是很有必要的，在代码量不那么大的时候，就暴露并解决了很多配置上遇到的问题。</p>
<p>另外，在阅读 Linux 内核源代码的过程中，我发现，尽管通常来说 C 语言是面向过程的，但是源代码中有很多的 struct，有点面向对象的味道，井然有序，我觉得这是很好的，阅读和调试都比较方便。</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 - 2025 Wuuuk | wuyukai@bupt.edu.cn
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="mailto:wuyukai@bupt.edu.cn" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.top", "navigation.tabs", "navigation.indexes", "serach.hightlight", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>